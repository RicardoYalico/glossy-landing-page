<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Glossy.pe | Catálogo de Maquillaje</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts -->
    <link
        href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,600;1,400&family=Lato:wght@300;400;700&display=swap"
        rel="stylesheet">
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'brand-nude': '#f5ebe0',
                        'brand-pink': '#e3d5ca',
                        'brand-dark': '#4a403a',
                        'brand-accent': '#d5bdaf',
                    },
                    fontFamily: {
                        serif: ['"Playfair Display"', 'serif'],
                        sans: ['"Lato"', 'sans-serif'],
                    }
                }
            }
        }
    </script>
    <style>
        body {
            background-color: #faf9f8;
            scroll-behavior: smooth;
        }

        .swatch {
            transition: transform 0.2s, border 0.2s;
            cursor: pointer;
        }

        .swatch:hover {
            transform: scale(1.2);
        }

        .swatch.active {
            border: 2px solid #4a403a;
            transform: scale(1.1);
        }

        .fade-in-up {
            animation: fadeInUp 0.8s ease-out forwards;
            opacity: 0;
            transform: translateY(20px);
        }

        @keyframes fadeInUp {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .glass-header {
            background: rgba(255, 255, 255, 0.85);
            backdrop-filter: blur(10px);
        }

        /* Estilos para el carrusel */
        .carousel-btn {
            background-color: rgba(255, 255, 255, 0.7);
            color: #4a403a;
            padding: 8px;
            border-radius: 50%;
            transition: all 0.3s;
        }

        .carousel-btn:hover {
            background-color: rgba(255, 255, 255, 0.95);
            transform: scale(1.1);
        }
    </style>
</head>

<body class="text-brand-dark font-sans antialiased">

    <!-- Navbar -->
    <nav class="glass-header fixed w-full z-50 border-b border-brand-pink/50 transition-all duration-300">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-20">
                <div class="flex-shrink-0 flex items-center">
                    <span class="font-serif text-2xl font-semibold tracking-wider">GLOSSY.PE</span>
                </div>
                <div class="hidden md:flex space-x-8">
                    <a href="#" onclick="switchView('individual'); return false;"
                        class="text-brand-dark hover:text-brand-accent transition font-light uppercase tracking-widest text-sm">Colección</a>
                    <a href="#" onclick="switchView('kits'); return false;"
                        class="text-brand-dark hover:text-brand-accent transition font-light uppercase tracking-widest text-sm">Kits</a>
                    <!-- Agregado link a envios -->
                    <a href="#envios"
                        class="text-brand-dark hover:text-brand-accent transition font-light uppercase tracking-widest text-sm">Envíos</a>
                </div>
                <div>
                    <a href="#footer"
                        class="text-xs uppercase tracking-widest font-semibold text-brand-dark hover:text-brand-accent transition">
                        Contacto
                    </a>
                </div>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <header class="relative pt-32 pb-20 lg:pt-48 lg:pb-32 bg-brand-nude overflow-hidden">
        <div class="absolute inset-0 opacity-40">
            <img src="https://images.unsplash.com/photo-1596462502278-27bfdd403348?ixlib=rb-1.2.1&auto=format&fit=crop&w=1950&q=80"
                alt="Makeup Texture" class="w-full h-full object-cover">
        </div>
        <div class="absolute inset-0 bg-gradient-to-t from-brand-nude via-transparent to-white/20"></div>

        <div class="relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center fade-in-up">
            <h1 class="text-5xl md:text-7xl font-serif text-brand-dark mb-6">Redefine tu Esencia</h1>
            <p class="max-w-2xl mx-auto text-lg md:text-xl font-light text-gray-600 mb-10">
                Una colección completa de maquillaje diseñada para realzar tu belleza natural. Desde bases perfectas hasta labiales vibrantes y sombras etéreas.
            </p>
            <a href="#catalogo"
                class="inline-block border border-brand-dark text-brand-dark px-10 py-3 uppercase tracking-widest text-sm hover:bg-brand-dark hover:text-white transition duration-300">
                Ver Catálogo
            </a>
        </div>
    </header>

    <!-- Catálogo Section -->
    <main id="catalogo" class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-20 min-h-screen">

        <!-- View Switcher (Tabs) -->
        <div class="flex justify-center mb-16 fade-in-up">
            <div class="inline-flex bg-white rounded-full p-1 shadow-sm border border-brand-pink/30">
                <button onclick="switchView('individual')" id="btn-individual"
                    class="px-8 py-3 rounded-full text-sm uppercase tracking-widest font-semibold transition-all duration-300 bg-brand-dark text-white shadow-md">
                    Colección Individual
                </button>
                <button onclick="switchView('kits')" id="btn-kits"
                    class="px-8 py-3 rounded-full text-sm uppercase tracking-widest font-semibold text-gray-500 hover:text-brand-dark transition-all duration-300">
                    Kits Exclusivos
                </button>
            </div>
        </div>

        <!-- VISTA 1: Individual Products (Generado Dinámicamente) -->
        <div id="vista-individual" class="transition-opacity duration-500">
            <!-- El contenido se inyectará aquí mediante JavaScript basándose en categoriesDB y productsDB -->
        </div>

        <!-- VISTA 2: LISTA DE KITS (Galería simplificada) -->
        <div id="vista-kits" class="hidden opacity-0 transition-opacity duration-500">
            <div class="flex items-end justify-between mb-12 border-b border-brand-pink/50 pb-4">
                <div>
                    <h2 class="text-3xl md:text-4xl font-serif mb-2">Sets Completos</h2>
                    <p class="text-gray-500 font-light">Rutinas curadas para un look completo.</p>
                </div>
                <span class="text-sm text-gray-400 hidden sm:block">EDICIÓN LIMITADA</span>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-12">

                <!-- KIT CARD 1 -->
                <div class="group cursor-pointer" onclick="openKitDetail('nude')">
                    <div class="relative overflow-hidden bg-white rounded-xl shadow-md h-96 w-full mb-6">
                        <img src="https://images.unsplash.com/photo-1512496015851-a90fb38ba796?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80"
                            alt="The Nude Essentials Kit"
                            class="h-full w-full object-cover transition duration-700 ease-in-out group-hover:scale-105">
                        <div class="absolute inset-0 bg-black/10 group-hover:bg-black/0 transition duration-300"></div>
                        <div class="absolute bottom-6 left-6 right-6">
                            <button
                                class="w-full bg-white/90 backdrop-blur text-brand-dark py-3 uppercase tracking-widest text-xs font-semibold hover:bg-brand-dark hover:text-white transition duration-300">
                                Ver Contenido del Kit
                            </button>
                        </div>
                    </div>
                    <div class="text-center">
                        <h3 class="text-2xl font-serif mb-2">The Nude Essentials Kit</h3>
                        <p class="text-gray-500 font-light mb-2 text-sm max-w-sm mx-auto">La colección definitiva de 12
                            productos para lograr una piel de vidrio y tonos neutros perfectos.</p>
                        <div class="flex justify-center items-center gap-3">
                            <span class="text-xl font-serif text-brand-dark">$65.00</span>
                            <span class="text-xs text-gray-400 line-through">$145.00 Value</span>
                        </div>
                    </div>
                </div>

                <!-- KIT CARD 2 -->
                <div class="group cursor-pointer" onclick="openKitDetail('glam')">
                    <div class="relative overflow-hidden bg-white rounded-xl shadow-md h-96 w-full mb-6">
                        <img src="https://images.unsplash.com/photo-1599305090598-fe179d501227?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80"
                            alt="Full Glam Night Kit"
                            class="h-full w-full object-cover transition duration-700 ease-in-out group-hover:scale-105">
                        <div class="absolute inset-0 bg-black/10 group-hover:bg-black/0 transition duration-300"></div>
                        <div class="absolute bottom-6 left-6 right-6">
                            <button
                                class="w-full bg-white/90 backdrop-blur text-brand-dark py-3 uppercase tracking-widest text-xs font-semibold hover:bg-brand-dark hover:text-white transition duration-300">
                                Ver Contenido del Kit
                            </button>
                        </div>
                    </div>
                    <div class="text-center">
                        <h3 class="text-2xl font-serif mb-2">Full Glam Night Kit</h3>
                        <p class="text-gray-500 font-light mb-2 text-sm max-w-sm mx-auto">10 esenciales de alto impacto
                            para una noche inolvidable. Ojos ahumados y labios rojos.</p>
                        <div class="flex justify-center items-center gap-3">
                            <span class="text-xl font-serif text-brand-dark">$85.00</span>
                            <span class="text-xs text-gray-400 line-through">$180.00 Value</span>
                        </div>
                    </div>
                </div>

            </div>
        </div>

        <!-- VISTA 3: DETALLE DEL KIT (Grid de productos dentro del kit) -->
        <div id="vista-kit-detalle" class="hidden opacity-0 transition-opacity duration-500">
            <!-- Back Button -->
            <div class="mb-8">
                <button onclick="closeKitDetail()"
                    class="flex items-center text-sm uppercase tracking-widest text-gray-500 hover:text-brand-dark transition">
                    <i data-lucide="arrow-left" class="w-4 h-4 mr-2"></i> Volver a Kits
                </button>
            </div>

            <!-- Kit Header Info (Dynamic) -->
            <div class="text-center mb-16 border-b border-brand-pink/30 pb-10">
                <h2 id="kit-detail-title" class="text-4xl md:text-5xl font-serif mb-4 text-brand-dark">Nombre del Kit
                </h2>
                <p id="kit-detail-desc" class="text-lg font-light text-gray-600 max-w-2xl mx-auto mb-6">Descripción del
                    kit.</p>
                <div class="inline-block border border-brand-dark px-6 py-2">
                    <span id="kit-detail-price" class="text-2xl font-serif text-brand-dark">$00.00</span>
                </div>
            </div>

            <!-- Products Grid (Dynamic) -->
            <div id="kit-products-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-10">
                <!-- Javascript injects content here -->
            </div>
        </div>

    </main>

    <!-- NUEVA SECCIÓN: MÉTODOS DE ENTREGA -->
    <section id="envios" class="py-24 bg-brand-pink/20 border-t border-brand-pink/30">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <!-- Title -->
            <div class="text-center mb-16">
                <h2 class="text-3xl md:text-4xl font-serif text-brand-dark mb-4">Métodos de Entrega</h2>
                <p class="text-gray-600 font-light max-w-2xl mx-auto text-sm md:text-base leading-relaxed">
                    Llevamos la esencia Glossy hasta la puerta de tu casa. Elige la opción que mejor se adapte a tu ritmo de vida.
                </p>
            </div>

            <!-- Grid -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <!-- Card 1 -->
                <div class="bg-white p-8 rounded-xl shadow-sm text-center hover:shadow-md transition duration-300 border border-brand-pink/10">
                    <div class="inline-flex items-center justify-center w-14 h-14 bg-brand-nude rounded-full mb-6 text-brand-dark">
                        <i data-lucide="truck" class="w-6 h-6"></i>
                    </div>
                    <h3 class="font-serif text-xl mb-3 text-brand-dark">Envío Standard</h3>
                    <p class="text-sm text-gray-500 font-light leading-relaxed">
                        Llegamos a todo el país. Tu pedido viajará seguro y llegará en un plazo estimado de <strong>3 a 5 días hábiles</strong>.
                    </p>
                </div>
                <!-- Card 2 -->
                <div class="bg-white p-8 rounded-xl shadow-sm text-center hover:shadow-md transition duration-300 border border-brand-pink/10">
                    <div class="inline-flex items-center justify-center w-14 h-14 bg-brand-nude rounded-full mb-6 text-brand-dark">
                        <i data-lucide="zap" class="w-6 h-6"></i>
                    </div>
                    <h3 class="font-serif text-xl mb-3 text-brand-dark">Express Lima</h3>
                    <p class="text-sm text-gray-500 font-light leading-relaxed">
                        ¿Lo necesitas urgente? Entrega al día siguiente en Lima Metropolitana para pedidos confirmados antes de la 1:00 PM.
                    </p>
                </div>
                <!-- Card 3 -->
                <div class="bg-white p-8 rounded-xl shadow-sm text-center hover:shadow-md transition duration-300 border border-brand-pink/10">
                    <div class="inline-flex items-center justify-center w-14 h-14 bg-brand-nude rounded-full mb-6 text-brand-dark">
                        <i data-lucide="shopping-bag" class="w-6 h-6"></i>
                    </div>
                    <h3 class="font-serif text-xl mb-3 text-brand-dark">Recojo en Tienda</h3>
                    <p class="text-sm text-gray-500 font-light leading-relaxed">
                        Compra online y recoge sin costo adicional en nuestros puntos de venta autorizados. Listo en 24 horas.
                    </p>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer id="footer" class="bg-brand-dark text-brand-nude py-16">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 grid grid-cols-1 md:grid-cols-3 gap-12">
            <div>
                <h3 class="font-serif text-2xl mb-6">GLOSSY.PE</h3>
                <p class="font-light text-sm opacity-80 leading-relaxed">
                    Celebrando la belleza individual a través de productos conscientes y estéticamente puros.
                </p>
            </div>
            <div>
                <h4 class="text-sm uppercase tracking-widest mb-6 font-semibold">Descubre</h4>
                <ul class="space-y-3 text-sm opacity-80 font-light">
                    <li><a href="#" onclick="switchView('individual'); return false;"
                            class="hover:text-white hover:underline">Labios</a></li>
                    <li><a href="#" onclick="switchView('individual'); return false;"
                            class="hover:text-white hover:underline">Rostro</a></li>
                    <li><a href="#" onclick="switchView('individual'); return false;"
                            class="hover:text-white hover:underline">Ojos</a></li>
                </ul>
            </div>
            <div>
                <h4 class="text-sm uppercase tracking-widest mb-6 font-semibold">Mantente en contacto</h4>
                <p class="text-sm opacity-80 mb-4 font-light">Síguenos para lanzamientos exclusivos.</p>
                <div class="flex space-x-4 mt-6">
                    <i data-lucide="instagram" class="w-5 h-5 cursor-pointer hover:text-white"></i>
                    <i data-lucide="facebook" class="w-5 h-5 cursor-pointer hover:text-white"></i>
                    <i data-lucide="twitter" class="w-5 h-5 cursor-pointer hover:text-white"></i>
                </div>
            </div>
        </div>
        <div
            class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 mt-16 pt-8 border-t border-brand-nude/10 text-center text-xs opacity-60">
            &copy; 2025 Glossy.pe Cosmetics.
        </div>
    </footer>

    <!-- Scripts -->
    <script>
        // Inicializar iconos
        lucide.createIcons();

        // ==========================================
        //  CONFIGURACIÓN DE CATEGORÍAS (DINÁMICO)
        // ==========================================
        // Define aquí los metadatos de las categorías.
        // La clave (ej: 'labios') debe coincidir con el campo 'category' en productsDB.
        const categoriesDB = {
        'Fijadores y Removedor': {
            title: 'Fijadores y Removedor',
            subtitle: 'Productos para sellar, prolongar y remover tu maquillaje.',
            order: 1
        },
        'Fragancias': {
            title: 'Fragancias',
            subtitle: 'Aromas únicos que acompañan tu estilo todos los días.',
            order: 2
        },
        'Skincare': {
            title: 'Skincare',
            subtitle: 'Cuidado facial para una piel sana y luminosa.',
            order: 3
        },
        'Iluminador': {
            title: 'Iluminadores',
            subtitle: 'Resalta los puntos clave de tu rostro con luz natural.',
            order: 4
        },
        'Rubor': {
            title: 'Rubores',
            subtitle: 'Aporta color y frescura a tus mejillas.',
            order: 5
        },
        'Sombras': {
            title: 'Sombras',
            subtitle: 'Colores y texturas para crear miradas únicas.',
            order: 6
        },
        'Labiales': {
            title: 'Labiales',
            subtitle: 'Acabados mate, satinados y glossy para cada ocasión.',
            order: 7
        },
        'Polvos, corrector y bases': {
            title: 'Polvos, corrector y bases',
            subtitle: 'Bases, correctores y polvos para un acabado perfecto.',
            order: 8
        },
        'Rímel, delineador y cejas': {
            title: 'Rímel, delineador y cejas',
            subtitle: 'Define y realza tu mirada con precisión.',
            order: 9
        },
        'Uñas': {
            title: 'Uñas',
            subtitle: 'Esmaltes y tratamientos para manos impecables.',
            order: 10
        }
        };

        // ==========================================
        //  BASE DE DATOS DE PRODUCTOS (EDITAR AQUÍ)
        // ==========================================
        const productsDB = [
            // --- LABIOS ---
            {
                id: 'p1',
                category: 'Polvos, corrector y bases',
                name: 'Base Cushion - Gagk',
                price: 'S/ 18.00',
                desc: 'Base cushion coreana con cobertura ligera a media que unifica el tono de la piel dejando un acabo natural y luminoso. Su fórmula hidratante se funde fácilmente, proporcionando confort durante todo el día y un look fresco y radiante.',
                tag: 'Best Seller',
                images: [
                    '/images/1.Base gagk/Gemini_Generated_Image_56jqi056jqi056jq (1).png',
                    '/images/1.Base gagk/Gemini_Generated_Image_e2l7vhe2l7vhe2l7.png' // Segunda foto ejemplo
                ],
                tones: [
                    { name: 'Vanilla Sand', hex: '#F0DDC8' },
                    { name: 'Warm Almond', hex: '#E8CCAC' }
                ],
                defaultTone: 'Rose Nude'
            },
            {
                id: 'p2',
                category: 'Rimel, delineador y aplicador para cejas',
                name: 'Brown Set ceja - Revel',
                price: 'S/ 5.00',
                desc: 'Define y fija las cejas con un acabado natural, manteniéndolas prolijas todo el día.',
                tag: '',
                images: [
                    '/images/2.BROWN REVEL/Gemini_Generated_Image_nzfzjwnzfzjwnzfz.png',
                    '/images/2.BROWN REVEL/TONOS.png',
                ],
                tones: [
                    { name: 'Dusty Rose', hex: '#A88275' },
                    { name: 'Mocha Blush', hex: '#8F675C' },
                    { name: 'Deep Cocoa', hex: '#5E5049' }
                ],
                defaultTone: 'Clear'
            },
            {
                id: 'p3',
                category: 'Polvos, corrector y bases',
                name: 'Corrector - Kevin & Coco',
                price: 'S/ 7.00',
                desc: 'Cobertura impecable y acabado natural, ideal para camuflar imperfecciones sin resecar. Difumina poros y textura dejando la piel suave y uniforme. Su fórmula hidratante con ácido hialurónico y escualeno no marca líneas y aporta una luminosidad sutil.',
                tag: '',
                images: [
                    '/images/3.Corrector kevin and coco/Gemini_Generated_Image_mlbvklmlbvklmlbv.png',
                    '/images/3.Corrector kevin and coco/Gemini_Generated_Image_8r96rr8r96rr8r96.png',
                ],
                tones: [
                    { name: 'Soft Ivory', hex: '#F1E3C1' },
                    { name: 'Warm Linen', hex: '#E7CCB6' },
                    { name: 'Golden Oat', hex: '#E1C19D' },
                    { name: 'Sand Beige', hex: '#E5BFA2' }
                ],
                defaultTone: 'Cinnamon'
            },
            // --- ROSTRO ---
            {
                id: 'p4',
                category: 'Skincare',
                name: 'Crema Facial de día - Kevin & coco',
                price: 'S/ 15.00',
                desc: 'Cobertura ligera con efecto \'segunda piel\'.',
                tag: '',
                images: [
                    '/images/4.crema hidratante/crema.webp',
                    '/images/4.crema hidratante/crema hidratante 2.webp',
                ],
                tones: [
                    { name: 'White', hex: '#ffffff' },
                ],
                defaultTone: 'White'
            },
            {
                id: 'p5',
                category: 'Rimel, delineador y aplicador para cejas',
                name: 'Delineador y Rimel Kevin & Coco',
                price: 'S/ 12.00',
                desc: 'Incluye delineador y rímel para lograr una mirada intensa y definida con facilidad.',
                tag: '',
                images: [
                    '/images/5.delineador y rimel kevin and coco/imagen 1.webp',
                    '/images/5.delineador y rimel kevin and coco/imagen 3.webp',
                ],
                tones: [
                    { name: 'Black', hex: '#000000' },
                ],
                defaultTone: 'Black'
            },
            // --- OJOS ---
            {
                id: 'p6',
                category: 'Rubor',
                name: 'Duo de Rubor y Lipgloss Butterfly',
                price: 'S/ 12.00',
                desc: 'Dúo práctico que incluye un lipgloss tipo lip oil y un rubor en crema en tonos cálidos y favorecedores. Sus fórmulas son ligeras, fáciles de difuminar y dejan un acabado natural y fresco, ideal para un look diario',
                tag: 'Trending',
                images: [
                    '/images/6.Duo de lipgloss y rubor kevin and coco/Gemini_Generated_Image_irt3lairt3lairt3.png',
                    '/images/6.Duo de lipgloss y rubor kevin and coco/Gemini_Generated_Image_1kvr1j1kvr1j1kvr.png',
                ],
                tones: [
                    { name: 'Rose Bloom', hex: '#E4729A' },
                    { name: 'Coral Kiss', hex: '#E7817C' }
                ],
                defaultTone: 'Rose Bloom'
            },
            {
                id: 'p7',
                category: 'Labiales',
                name: 'Set Labial en barra y lipgloss - Kevin & Coco',
                price: 'S/ 8.00',
                desc: 'Duo de labial cremoso pigmentado y gloss ultra-brillante que ofrece color intenso y un acabado efecto glass; se pueden usar juntos o por separado para un look versátil y glamuroso.',
                tag: 'Trending',
                images: [
                    '/images/7.Duo labiales/Gemini_Generated_Image_oget5ioget5ioget (1).png',
                    '/images/7.Duo labiales/Gemini_Generated_Image_1s0wx41s0wx41s0w.png',
                ],
                tones: [
                    { name: 'Warm Terracotta', hex: '#C07A68' },
                    { name: 'Rose Clay', hex: '#D0857B' },
                    { name: 'Burnt Sienna', hex: '#A35545' },
                    { name: 'Dusty Rosewood', hex: '#C97477' }
                ],
                defaultTone: 'Warm Terracotta'
            },
            {
                id: 'p8',
                category: 'Fijadores y Removedor',
                name: 'Fijador Kevin & Coco',
                price: 'S/ 12.00',
                desc: 'Spray fijador ligero que prolonga la duración del maquillaje, controla los brillos y deja la piel fresca con un acabado natural. Ideal para todo tipo de piel, sin sensación pegajosa.',
                tag: 'Trending',
                images: [
                    '/images/8.Fijador Kevin and coco/Gemini_Generated_Image_1069cx1069cx1069 (1).png',
                    '/images/8.Fijador Kevin and coco/Gemini_Generated_Image_6dykte6dykte6dyk.png',
                ],
                tones: [
                    { name: 'Withe', hex: '#ffffff' },
                ],
                defaultTone: 'Withe'
            },
            {
                id: 'p9',
                category: 'Fijadores y Removedor ',
                name: 'Fijador Kiss Beauty',
                price: 'S/ 12.00',
                desc: 'Un spray ligero y eficaz que fija el maquillaje prolongando su duración durante todo el día. Su fórmula ayuda a controlar el brillo, manteniendo la piel con un acabado natural, fresco e impecable por horas.',
                tag: 'Trending',
                images: [
                    '/images/9.FIJADOR KISS BEAUTY/Gemini_Generated_Image_29sgge29sgge29sg.png',
                    '/images/9.FIJADOR KISS BEAUTY/Gemini_Generated_Image_fp9zm2fp9zm2fp9z.png',
                ],
                tones: [
                    { name: 'Withe', hex: '#ffffff' }
                ],
                defaultTone: 'Withe'
            },
            {
                id: 'p10',
                category: 'Labiales',
                name: 'Labial Crystal Kiss Gloss - Kevin & Coco',
                price: 'S/ 6.00',
                desc: 'Labial con efecto aterciopelado matte que combina el brillo sutil del gloss con un acabado suave y sofisticado. Aporta color intenso y confort en los labios sin sensación pegajosa, para un look elegante y moderno.',
                tag: 'Trending',
                images: [
                    '/images/10.Labial aterciopelado/Gemini_Generated_Image_gv0abngv0abngv0a (1).png',
                    '/images/10.Labial aterciopelado/Gemini_Generated_Image_fpwvkfpwvkfpwvkf.png',
                ],
                tones: [
                    { name: 'Deep Mocha', hex: '#573E38' },
                    { name: 'Cinnamon Nude', hex: '#A2614D' },
                    { name: 'Warm Taupe', hex: '#986958' },
                    { name: 'Crimson Clay', hex: '#9C3F3E' },
                    { name: 'Plum Earth', hex: '#6F363C' },
                    { name: 'Burnt Rouge', hex: '#A03027' }
                ],
                defaultTone: 'Deep Mocha'
            },
            {
                id: 'p11',
                category: 'Labiales',
                name: 'Labial Matte ultra - Kiss Beauty',
                price: 'S/ 4.50',
                desc: 'Labial de acabado mate intenso con pigmentación duradera y textura suave que se desliza fácilmente en los labios. Proporciona un color vibrante y cómodo durante todo el día',
                tag: 'Trending',
                images: [
                    '/images/11.Labial matte kiss beauty/Gemini_Generated_Image_589ho5589ho5589h.png',
                    '/images/11.Labial matte kiss beauty/Gemini_Generated_Image_lrt0jalrt0jalrt0.png',
                ],
                tones: [
                    { name: 'Soft Peach', hex: '#C59987' },
                    { name: 'Blush Latte', hex: '#BE857E' },
                    { name: 'Muted Rose', hex: '#B1817C' },
                    { name: 'Warm Brick', hex: '#AB6352' },
                    { name: 'Rose Mauve', hex: '#A45261' },
                    { name: 'Spiced Caramel', hex: '#C07653' },
                    { name: 'Deep Garnet', hex: '#A33C39' },
                    { name: 'Plum Cocoa', hex: '#763A46' }
                ],
                defaultTone: 'Soft Peach'
            },
            {
                id: 'p12',
                category: 'Labiales',
                name: 'Labial Love Lip Gloss efecto matte - Kevin & Coco',
                price: 'S/ 3.50',
                desc: 'Lipgloss de larga duración, resistente al agua y a las manchas. Su fórmula hidratante con aceite de jojoba y vitamina E cuida los labios, mientras aporta un brillo efecto cristal sin sensación pegajosa. Ideal para un look cómodo y duradero.',
                tag: 'Trending',
                images: [
                    '/images/12.Lipgloss corazon/Gemini_Generated_Image_slb051slb051slb0 (1).png',
                    '/images/12.Lipgloss corazon/tonos.webp',
                ],
                tones: [
                    { name: 'Pink Coral', hex: '#F48685' },
                    { name: 'Soft Flamingo', hex: '#F17777' },
                    { name: 'Rose Sorbet', hex: '#EF887F' },
                    { name: 'Blush Petal', hex: '#EA8C84' },
                    { name: 'Berry Bloom', hex: '#E35F76' },
                    { name: 'Classic Red', hex: '#BA3E32' },
                    { name: 'Spiced Red', hex: '#CC523C' },
                    { name: 'Coral Rouge', hex: '#EA6A5D' }
                ],
                defaultTone: 'Pink Coral'
            },
            {
                id: 'p13',
                category: 'ojos',
                name: 'LIPGLOSS WATER LIP - GAGK',
                price: 'S/ 7.00',
                desc: 'Lipgloss que aporta brillo efecto agua y deja los labios suaves y luminosos. Su textura ligera e hidratante se desliza fácilmente, brindando un acabado fresco y jugoso sin sensación pegajosa, ideal para uso diario',
                tag: '',
                images: [
                    '/images/13.Lipgloss gagk/Gemini_Generated_Image_ouoddxouoddxouod.png',
                    '/images/13.Lipgloss gagk/tono2.png',
                ],
                tones: [
                    { name: 'Vintage Rose', hex: '#B1564E' },
                    { name: 'Smoked Blush', hex: '#A84D48' },
                    { name: 'Dusty Wine', hex: '#9E4244' }
                ],
                defaultTone: 'Vintage Rose'
            },
            {
                id: 'p14',
                category: 'Labiales',
                name: 'Balsamo hidratante de labios - Jelly Pocket Lip Jam Dupe Sheglam - Yeahkiss',
                price: 'S/ 5.00',
                desc: 'Bálsamo con textura suave y jugosa que hidrata y nutre los labios, dejando un acabado brillante y saludable. Ideal para uso diario y para mantener los labios suaves y protegidos',
                tag: '',
                images: [
                    '/images/14.lipjam yeahkiss/Gemini_Generated_Image_leod7vleod7vleod.png',
                    '/images/14.lipjam yeahkiss/Gemini_Generated_Image_4kzprs4kzprs4kzp (1).png',
                ],
                tones: [
                    { name: 'Dark Berry', hex: '#542931' },
                    { name: 'Spiced Cocoa', hex: '#874136' },
                    { name: 'Warm Chestnut', hex: '#8E5143' },
                    { name: 'Midnight Plum', hex: '#4A2B30' },
                    { name: 'Coral Flame', hex: '#DF6758' },
                    { name: 'Soft Periwinkle', hex: '#A5B2CB' }
                ],
                defaultTone: 'Warm Sunset'
            },
            {
                id: 'p15',
                category: 'ojos',
                name: 'Fijador Matificante de arroz - Magic Shop',
                price: 'S/ 12.50',
                desc: 'Controla el brillo, absorbe el exceso de grasa y fija tu maquillaje, dejando un acabado mate natural y suave. Ideal para pieles mixtas o grasas.',
                tag: 'Trending',
                images: [
                    '/images/15.Matificante de arroz - Magic shop/Gemini_Generated_Image_sr9qd5sr9qd5sr9q.png',
                ],
                tones: [
                    { name: 'Withe', hex: '#ffffff' }
                ],
                defaultTone: 'Withe'
            },
            {
                id: 'p16',
                category: 'Polvos, corrector y bases',
                name: 'Polvo traslucido - Revel',
                price: 'S/ 7.00',
                desc: 'Polvo compacto ligero que fija, matifica y deja un acabado natural y suave.',
                tag: 'Trending',
                images: [
                    '/images/16.Polvo traslucido revel/Gemini_Generated_Image_1bnlre1bnlre1bnl.png',
                    '/images/16.Polvo traslucido revel/Gemini_Generated_Image_w2m8igw2m8igw2m8.png',
                ],
                tones: [
                    { name: 'Warm Camel', hex: '#B58B67' }
                ],
                defaultTone: 'Warm Camel'
            },
            {
                id: 'p17',
                category: 'Fijadores y Removedor',
                name: 'Removedor Biofasico - Kevin & Coco',
                price: 'S/ 15.00',
                desc: 'Desmaquillante suave y eficaz que elimina el maquillaje. Limpia a profundidad y deja el rostro fresco, limpio y confortable. Ideal para uso diario y apto para todo tipo de piel.',
                tag: '',
                images: [
                    '/images/17.Removedor Kevin and coco/Gemini_Generated_Image_xluz02xluz02xluz.png',
                ],
                tones: [
                    { name: 'WWithe', hex: '#ffffff' }
                ],
                defaultTone: 'Withe'
            },
            {
                id: 'p18',
                category: 'Rubor',
                name: 'Rubor líquido - Dupe de Sheglam  - Kevin & Coco',
                price: 'S/ 9.00',
                desc: 'Rubor líquido de textura cremosa y acabado mate, altamente pigmentado y de larga duración con sensación liviana en la piel. Incluye aplicador para una aplicación fácil y un acabo natural. Disponible en varios tonos.',
                tag: 'Trending',
                images: [
                    '/images/18.rubor liquido/rubor 2.webp',
                    '/images/18.rubor liquido/tonos.webp',
                ],
                tones: [
                    { name: 'Peach Bloom', hex: '#F1A49A' },
                    { name: 'Soft Terracotta', hex: '#DA7F70' },
                    { name: 'Rose Clay', hex: '#D47973' },
                    { name: 'Crimson Blush', hex: '#E06265' },
                    { name: 'Muted Berry', hex: '#AD5154' },
                    { name: 'Warm Rust', hex: '#AF594D' }
                ],
                defaultTone: 'Peach Bloom'
            },
            {
                id: 'p19',
                category: 'Fragancias',
                name: 'Serum 4 en 1 - Blianlian 30 ml',
                price: 'S/ 12.00',
                desc: 'Potente sérum facial 4 en 1 formulado con Ácido Hialurónico, Niacinamida y Vitaminas C y E, ideal para el cuidado diario de la piel. Ayuda a hidratar profundamente, mejorar la luminosidad, unificar el tono y aportar protección antioxidante, dejando el rostro suave, fresco y revitalizado.',
                tag: 'Trending',
                images: [
                    '/images/19.Serum 4 en 1/Gemini_Generated_Image_u6m9e2u6m9e2u6m9.png',
                ],
                tones: [
                    { name: 'Withe', hex: '#ffffff' }
                ],
                defaultTone: 'Withe'
            },
            {
                id: 'p20',
                category: 'Skincare',
                name: 'Serum 30 ml - Kevin & coco',
                price: 'S/ 12.00',
                desc: 'Sérum facial ligero y de rápida absorción que hidrata, ilumina y mejora la textura de la piel. Ayuda a unificar el tono, suavizar líneas finas y dejar el rostro más fresco y radiante.',
                tag: 'Trending',
                images: [
                    '/images/20.Serum kevin and coco/serum.webp',
                ],
                tones: [
                    { name: 'White', hex: '#ffffff' }
                ],
                defaultTone: 'White'
            },
            {
                id: 'p21',
                category: 'Sombras',
                name: 'Sombras Electric- Lofshe',
                price: 'S/ 12.00',
                desc: 'Paleta de sombras con tonos cálidos y vibrantes, que combina acabados mate, satinados y glitter para crear looks naturales o intensos.',
                tag: 'Trending',
                images: [
                    '/images/21.Sombra Electric/Gemini_Generated_Image_dzyur7dzyur7dzyu.png',
                ],
                tones: [
                    { name: 'Withe', hex: '#ffffff' }
                ],
                defaultTone: 'Withe'
            },
            {
                id: 'p22',
                category: 'Labiales',
                name: 'Labial líquido Matte teddy - YeAhKiss',
                price: 'S/ 9.00',
                desc: 'Labial líquido de acabado mate con tono cálido y versátil, inspirado en Teddy de Maybelline. Fórmula pigmentada y duradera que no se transfiere, ideal para un look sofisticado y natural.',
                tag: 'Trending',
                images: [
                    '/images/22.TEDDY/Gemini_Generated_Image_25vyep25vyep25vy.png',
                ],
                tones: [
                    { name: 'Peach Clay', hex: '#DD8268' },
                    { name: 'Dusty Coral', hex: '#C16561' },
                    { name: 'Burnt Red', hex: '#C1433D' },
                    { name: 'Warm Rosewood', hex: '#B7675B' },
                    { name: 'Deep Burgundy', hex: '#67282A' }
                ],
                defaultTone: 'Peach Clay'
            },
            {
                id: 'p23',
                category: 'Labiales',
                name: 'Tinta Candela- Nossa',
                price: 'S/ 5.00',
                desc: 'Tinta líquida con color intenso y duradero que se desliza suavemente en los labios, dejando un acabado vibrante y definido',
                tag: 'Trending',
                images: [
                    '/images/23.Tinta Candela/Gemini_Generated_Image_go1tekgo1tekgo1t.png',
                    '/images/23.Tinta Candela/Gemini_Generated_Image_xz1v31xz1v31xz1v.png',
                ],
                tones: [
                    { name: 'Soft Terracotta', hex: '#CA6E64' },
                    { name: 'Spiced Brick', hex: '#BD493E' },
                    { name: 'Rose Ember', hex: '#CD564D' },
                    { name: 'Warm Coral', hex: '#D86158' },
                    { name: 'Classic Crimson', hex: '#C94236' },
                    { name: 'Deep Chili', hex: '#A53D35' }
                ],
                defaultTone: 'Soft Terracotta'
            },
            {
                id: 'p24',
                category: 'Labiales',
                name: 'Tinta The game - Jarusa',
                price: 'S/ 5.00',
                desc: 'Tinta líquida con pigmento intenso que ofrece color vibrante y alta duración. Su fórmula se desliza fácil y fija bien, dejando un acabado definido y duradero en los labios',
                tag: 'Trending',
                images: [
                    '/images/24.Tinta the game Jarusa/Gemini_Generated_Image_eld8fheld8fheld8.png',
                    '/images/24.Tinta the game Jarusa/tonos.u4aed8-1705697520328',
                ],
                tones: [
                    { name: 'Berry Rose', hex: '#B94351' },
                    { name: 'Soft Raspberry', hex: '#C85B64' },
                    { name: 'Crimson Blush', hex: '#AF444B' },
                    { name: 'Warm Wine', hex: '#AA413D' },
                    { name: 'Dusty Plum', hex: '#BD6376' },
                    { name: 'Mulberry Silk', hex: '#A4455D' }
                ],
                defaultTone: 'Berry Rose'
            },
            {
                id: 'p25',
                category: 'Uñas',
                name: 'Uñas press on ojo de gato - Nossa',
                price: 'S/ 6.00',
                desc: 'Uñas postizas press-on con diseño ojo de gato que crea un efecto multidimensional y elegante. Fáciles de aplicar, duraderas y listas para usar, dan un acabado moderno y sofisticado sin necesidad de ir al salón. Perfectas para un look impactante al instante.',
                tag: 'Trending',
                images: [
                    '/images/25.uñas nossa/Gemini_Generated_Image_to56g8to56g8to56.png',
                    '/images/25.uñas nossa/Gemini_Generated_Image_wnsercwnsercwnse (1).png',
                ],
                tones: [
                    { name: 'Warm Sandstone', hex: '#B3856C' },
                    { name: 'Deep Walnut', hex: '#55362E' },
                    { name: 'Soft Taupe Rose', hex: '#936D62' },
                    { name: 'Desert Clay', hex: '#9C705C' },
                    { name: 'Golden Beige', hex: '#E0BC9B' },
                    { name: 'Sage Nude', hex: '#A8A392' },
                    { name: 'Blush Linen', hex: '#E2ADA8' }
                ],
                defaultTone: 'Warm Sandstone'
            },
            {
                id: 'p26',
                category: 'Fragancias',
                name: 'Body splash V.V. Love Dupe Sol de Janeiro',
                price: 'S/ 15.00',
                desc: 'Mellow Melody: Fragancia dulce y cálida con notas de chocolate, caramelo y miel. D /Cherry Delight – Fragancia dulce y frutal con notas de cereza/Fruit Symphony -  Aroma frutal dulce y jugoso, con notas vibrantes que recuerdan a frutas frescas y caramelizadas.',
                tag: 'Trending',
                images: [
                    '/images/26.Colonia sol de rio/Gemini_Generated_Image_qt8n45qt8n45qt8n.png',
                    '/images/26.Colonia sol de rio/Gemini_Generated_Image_ssaemfssaemfssae.png',
                ],
                tones: [
                    { name: 'Withe', hex: '#ffffff' }
                ],
                defaultTone: 'Withe'
            },
            {
                id: 'p27',
                category: 'Labiales',
                name: 'Labiales - Dorage',
                price: 'S/ 2.00',
                desc: 'Colección de 12 labiales en una mezcla de acabados mate y con brillo, con colores variados para crear looks versátiles.',
                tag: '',
                images: [
                    '/images/27.Labial Dorage/Gemini_Generated_Image_f78tlff78tlff78t.png',
                    '/images/27.Labial Dorage/tono 2.jpg',
                ],
                tones: [
                    { name: 'Powder Rose', hex: '#DAA9A9' },
                    { name: 'Dusty Mauve', hex: '#BD898E' },
                    { name: 'Muted Blush', hex: '#C6888C' },
                    { name: 'Berry Mauve', hex: '#C25777' },
                    { name: 'Crimson Petal', hex: '#CE5C60' },
                    { name: 'Deep Rosewood', hex: '#863437' }
                ],
                defaultTone: 'Powder Rose'
            },
            {
                id: 'p28',
                category: 'Skincare',
                name: 'Mascarilla variado - Bioquia',
                price: 'S/ 1.50',
                desc: 'Mascarillas faciales en diferentes versiones según la necesidad de tu piel: retinol para revitalizar, avena para calmar, green tea para refrescar y baba de caracol para hidratar y reparar. Dejan la piel suave, fresca y luminosa, ideales para el cuidado diario.',
                tag: 'Trending',
                images: [
                    '/images/28.Mascarillas/Gemini_Generated_Image_hjzlj4hjzlj4hjzl.png',
                    '/images/28.Mascarillas/Gemini_Generated_Image_wwxl2jwwxl2jwwxl.png',
                ],
                tones: [
                    { name: 'Velvet Mauve', hex: '#7953A3' },
                    { name: 'Rose Crimson', hex: '#C14A46' },
                    { name: 'Golden Olive', hex: '#B7915D' },
                    { name: 'Soft Moss', hex: '#759F4F' }
                ],
                defaultTone: 'Velvet Mauve'
            },
            {
                id: 'p29',
                category: 'Rubor',
                name: 'Rubor en barra - Dupe Rhode - M LUNDO',
                price: 'S/ 5.00',
                desc: 'Rubor en barra cremoso y retráctil inspirado en el famoso pocket blush de Rhode con pigmentación intensa que se difumina súper fácil para un toque de color natural en tus mejillas.',
                tag: '',
                images: [
                    '/images/29.rubor dupe/Gemini_Generated_Image_cneu4gcneu4gcneu.png',
                    '/images/29.rubor dupe/tonos, disponible tono 3.ffs7r4-1738878796906',
                ],
                tones: [
                    { name: 'Raspberry Pink', hex: '#DC4269' },
                    { name: 'Rose Pop', hex: '#F36B7A' },
                    { name: 'Fuchsia Bloom', hex: '#CE3E6F' },
                    { name: 'Soft Pink Veil', hex: '#F7B7D7' },
                    { name: 'Cherry Flame', hex: '#F14648' },
                    { name: 'Scarlet Kiss', hex: '#EB454F' }
                ],
                defaultTone: 'Raspberry Pink'
            },
            {
                id: 'p30',
                category: 'Iluminador',
                name: 'Kit duo 3 en 1 Iluminador, rubor y sombra - Kevin & Coco',
                price: 'S/ 10.00',
                desc: 'Kit versátil 3 en 1 que funciona como iluminador, rubor y sombra, ideal para crear looks completos con un solo producto. Cada paquete incluye 2 unidades del kit.',
                tag: 'Trending',
                images: [
                    '/images/30.3 en 1 polvos/imagen 1.avif'
                ],
                tones: [
                    { name: 'Withe', hex: '#ffffff' }
                ],
                defaultTone: 'Withe'
            },
            {
                id: 'p31',
                category: 'Labiales',
                name: 'Labial mousse barra matte - Italia deluxe',
                price: 'S/ 17.00',
                desc: 'Labial en barra con acabado mousse y efecto mate, textura ligera y suave que se desliza fácilmente, dejando un color intenso y duradero sin sensación pegajosa. Ideal para un look moderno y elegante. Disponible 23 sweet chocolate',
                tag: 'Trending',
                images: [
                    '/images/31. Labial Italia Deluxe/image.png'
                ],
                tones: [
                    { name: 'Sweet Chocolate', hex: '#8C4239' }
                ],
                defaultTone: 'Sweet Chocolate'
            }
        ];

        // ==========================================
        //  BASE DE DATOS DE KITS
        // ==========================================
        const kitsDB = {
            'nude': {
                title: "The Nude Essentials Kit",
                price: "$65.00",
                desc: "12 piezas esenciales para un look natural, fresco y radiante.",
                products: [
                    { name: "Luminous Skin Tint", tone: "Ivory", images: ["https://images.unsplash.com/photo-1631729371254-42c2a89e0e18?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80"], colors: [{ hex: '#f3e2c3', name: 'Ivory' }, { hex: '#e8cdb3', name: 'Sand' }, { hex: '#dcbca0', name: 'Beige' }] },
                    { name: "Matte Silk Lipstick", tone: "Rose Nude", images: ["https://images.unsplash.com/photo-1586495777744-4413f21062fa?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80"], colors: [{ hex: '#dfaea3', name: 'Rose Nude' }, { hex: '#c98877', name: 'Terracotta' }] }
                    // ... (Simplificado para el ejemplo, pero el código de render usa la misma lógica)
                ]
            },
            'glam': {
                title: "Full Glam Night Kit",
                price: "$85.00",
                desc: "Todo lo necesario para destacar. Tonos profundos y acabados metálicos.",
                products: [
                    { name: "Earth Tones Palette", tone: "Warm Sunset", images: ["https://images.unsplash.com/photo-1583241747386-404ead2a7752?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80"], colors: [{ hex: '#d65a31', name: 'Warm Sunset' }, { hex: '#222831', name: 'Cool Night' }] }
                ]
            }
        };

        // ==========================================
        //  LÓGICA DE RENDERIZADO
        // ==========================================

        function renderProducts() {
            const containerMain = document.getElementById('vista-individual');
            containerMain.innerHTML = ''; // Limpiar cualquier contenido existente

            // 1. Agrupar productos por categoría
            const productsByCategory = {};
            productsDB.forEach(p => {
                if (!productsByCategory[p.category]) productsByCategory[p.category] = [];
                productsByCategory[p.category].push(p);
            });

            // 2. Iterar sobre categoriesDB para mantener el orden deseado
            // Si hay una categoría en DB pero no en config, se podría manejar como 'Otros', 
            // pero por ahora solo renderizamos lo configurado.
            Object.keys(categoriesDB).sort((a, b) => categoriesDB[a].order - categoriesDB[b].order).forEach((catKey, index) => {
                const catConfig = categoriesDB[catKey];
                const products = productsByCategory[catKey];

                // Solo renderizar la sección si hay productos para esa categoría
                if (products && products.length > 0) {

                    // Crear HTML de la Sección (Título + Contenedor de Grid)
                    const sectionHtml = `
                        <div id="container-${catKey}" class="mb-24 fade-in-up" style="animation-delay: ${0.2 + (index * 0.2)}s;">
                            <div class="flex items-end justify-between mb-12 border-b border-brand-pink/50 pb-4">
                                <div>
                                    <h2 class="text-3xl md:text-4xl font-serif mb-2">${catConfig.title}</h2>
                                    <p class="text-gray-500 font-light">${catConfig.subtitle}</p>
                                </div>
                                <span class="text-sm text-gray-400 hidden sm:block">0${index + 1} — INDIVIDUAL</span>
                            </div>
                            <div id="grid-${catKey}" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-10">
                                <!-- Las tarjetas se inyectarán aquí -->
                            </div>
                        </div>
                    `;

                    // Agregar sección al DOM principal
                    containerMain.insertAdjacentHTML('beforeend', sectionHtml);

                    // Referencia al grid recién creado
                    const gridContainer = document.getElementById(`grid-${catKey}`);

                    // 3. Renderizar productos dentro del grid
                    products.forEach(product => {
                        const hasMultipleImages = product.images.length > 1;

                        // Generar HTML de Imágenes (Carrusel o Simple)
                        let imagesHtml = '';
                        product.images.forEach((img, index) => {
                            const hiddenClass = index === 0 ? '' : 'hidden';
                            // Importante: unique styles display:none handling inside inline style for JS logic
                            const styleDisplay = index !== 0 ? 'style="display:none"' : '';
                            imagesHtml += `<img src="${img}" class="absolute inset-0 w-full h-full object-cover transition duration-500 ease-in-out product-img-${product.id}" data-index="${index}" ${styleDisplay}>`;
                        });

                        // Controles del Carrusel
                        let carouselControls = '';
                        if (hasMultipleImages) {
                            carouselControls = `
                                <button onclick="changeImage('${product.id}', -1)" class="carousel-btn absolute left-2 top-1/2 transform -translate-y-1/2 opacity-0 group-hover:opacity-100 z-10 hover:bg-white">
                                    <i data-lucide="chevron-left" class="w-4 h-4"></i>
                                </button>
                                <button onclick="changeImage('${product.id}', 1)" class="carousel-btn absolute right-2 top-1/2 transform -translate-y-1/2 opacity-0 group-hover:opacity-100 z-10 hover:bg-white">
                                    <i data-lucide="chevron-right" class="w-4 h-4"></i>
                                </button>
                                <div class="absolute bottom-2 left-0 right-0 flex justify-center space-x-1">
                                    ${product.images.map((_, i) => `<div class="w-1.5 h-1.5 rounded-full bg-white/50 dot-${product.id}" data-index="${i}"></div>`).join('')}
                                </div>
                            `;
                        }

                        // Generar HTML de Tonos
                        let tonesHtml = '';
                        product.tones.forEach((tone, idx) => {
                            const activeClass = idx === 0 ? 'active' : '';
                            const bgStyle = tone.name === 'Warm Sunset' ? 'background-image: linear-gradient(to bottom right, #fed7aa, #f87171)' :
                                tone.name === 'Cool Night' ? 'background-image: linear-gradient(to bottom right, #e5e7eb, #4b5563)' :
                                    `background-color: ${tone.hex}`;

                            tonesHtml += `<button class="w-6 h-6 rounded-full swatch ${activeClass}" style="${bgStyle}" onclick="selectTone(this, '${tone.name}')"></button> `;
                        });

                        const tagHtml = product.tag ? `<div class="absolute top-4 right-4 bg-white/90 backdrop-blur px-3 py-1 text-xs uppercase tracking-wide z-10">${product.tag}</div>` : '';

                        const cardHtml = `
                            <div class="group" id="product-${product.id}" data-current-img="0" data-total-imgs="${product.images.length}">
                                <div class="relative overflow-hidden bg-white rounded-t-xl h-80 w-full mb-4">
                                    ${imagesHtml}
                                    ${tagHtml}
                                    ${carouselControls}
                                </div>
                                <div>
                                    <div class="flex justify-between items-start mb-2">
                                        <h3 class="text-xl font-serif">${product.name}</h3>
                                        <span class="text-lg font-light text-brand-dark">${product.price}</span>
                                    </div>
                                    <p class="text-sm text-gray-500 mb-4 line-clamp-2">${product.desc}</p>
                                    
                                    <div class="mb-4">
                                        <p class="text-xs uppercase tracking-widest text-gray-400 mb-2">Tono: <span class="text-brand-dark font-medium selected-tone-name">${product.defaultTone}</span></p>
                                        <div class="flex space-x-2 flex-wrap gap-y-2">
                                            ${tonesHtml}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        `;

                        gridContainer.insertAdjacentHTML('beforeend', cardHtml);
                    });
                }
            });

            // Re-inicializar iconos
            lucide.createIcons();
            updateDots();
        }

        // --- LÓGICA DEL CARRUSEL ---
        function changeImage(productId, direction) {
            const productCard = document.getElementById(`product-${productId}`);
            let currentIndex = parseInt(productCard.getAttribute('data-current-img'));
            const totalImages = parseInt(productCard.getAttribute('data-total-imgs'));

            // Ocultar imagen actual
            const images = productCard.querySelectorAll(`.product-img-${productId}`);
            images[currentIndex].style.display = 'none';

            // Calcular nuevo índice
            currentIndex = currentIndex + direction;
            if (currentIndex >= totalImages) currentIndex = 0;
            if (currentIndex < 0) currentIndex = totalImages - 1;

            // Mostrar nueva imagen
            images[currentIndex].style.display = 'block';

            // Actualizar estado
            productCard.setAttribute('data-current-img', currentIndex);
            updateDots(productId, currentIndex);
        }

        function updateDots(productId = null, activeIndex = 0) {
            if (productId) {
                const dots = document.querySelectorAll(`.dot-${productId}`);
                dots.forEach((dot, idx) => {
                    dot.classList.remove('bg-white');
                    dot.classList.add('bg-white/50');
                    if (idx === activeIndex) {
                        dot.classList.remove('bg-white/50');
                        dot.classList.add('bg-white');
                    }
                });
            } else {
                // Initialize all dots active state (index 0)
                document.querySelectorAll('.group').forEach(group => {
                    const dots = group.querySelectorAll('div[class*="dot-"]');
                    if (dots.length > 0) {
                        dots[0].classList.remove('bg-white/50');
                        dots[0].classList.add('bg-white');
                    }
                });
            }
        }

        // --- FUNCIONES EXISTENTES ---

        function selectTone(element, toneName) {
            const productContainer = element.closest('.group');
            if (productContainer) {
                const toneNameElement = productContainer.querySelector('.selected-tone-name');
                if (toneNameElement) toneNameElement.textContent = toneName;

                const swatchesContainer = element.parentElement;
                const swatches = swatchesContainer.querySelectorAll('.swatch');
                swatches.forEach(swatch => swatch.classList.remove('active', 'border-2', 'border-brand-dark', 'scale-110'));
                element.classList.add('active');
            }
        }

        function switchView(viewName) {
            const individualView = document.getElementById('vista-individual');
            const kitsView = document.getElementById('vista-kits');
            const kitDetailView = document.getElementById('vista-kit-detalle');
            const btnIndividual = document.getElementById('btn-individual');
            const btnKits = document.getElementById('btn-kits');

            kitDetailView.classList.add('hidden', 'opacity-0');

            if (viewName === 'individual') {
                individualView.classList.remove('hidden');
                setTimeout(() => individualView.classList.remove('opacity-0'), 50);

                kitsView.classList.add('opacity-0');
                setTimeout(() => kitsView.classList.add('hidden'), 500);

                btnIndividual.classList.add('bg-brand-dark', 'text-white', 'shadow-md');
                btnIndividual.classList.remove('text-gray-500');
                btnKits.classList.remove('bg-brand-dark', 'text-white', 'shadow-md');
                btnKits.classList.add('text-gray-500');
            } else {
                kitsView.classList.remove('hidden');
                setTimeout(() => kitsView.classList.remove('opacity-0'), 50);

                individualView.classList.add('opacity-0');
                setTimeout(() => individualView.classList.add('hidden'), 500);

                btnKits.classList.add('bg-brand-dark', 'text-white', 'shadow-md');
                btnKits.classList.remove('text-gray-500');
                btnIndividual.classList.remove('bg-brand-dark', 'text-white', 'shadow-md');
                btnIndividual.classList.add('text-gray-500');
            }
        }

        function openKitDetail(kitId) {
            const kit = kitsDB[kitId];
            if (!kit) return;

            const kitsView = document.getElementById('vista-kits');
            const detailView = document.getElementById('vista-kit-detalle');
            const grid = document.getElementById('kit-products-grid');

            kitsView.classList.add('opacity-0');
            setTimeout(() => {
                kitsView.classList.add('hidden');

                document.getElementById('kit-detail-title').innerText = kit.title;
                document.getElementById('kit-detail-price').innerText = kit.price;
                document.getElementById('kit-detail-desc').innerText = kit.desc;

                grid.innerHTML = '';
                kit.products.forEach((prod, index) => {
                    // Logic to handle images inside Kit Detail (Simplified to show first image only for now, but scalable)
                    const mainImage = prod.images ? prod.images[0] : prod.img; // Fallback for old data structure

                    let colorsHtml = '';
                    prod.colors.forEach((col, idx) => {
                        const activeClass = idx === 0 ? 'active' : '';
                        colorsHtml += `<button class="w-6 h-6 rounded-full swatch ${activeClass}" style="background-color: ${col.hex};" onclick="selectTone(this, '${col.name}')"></button>`;
                    });

                    const cardHtml = `
                        <div class="group">
                            <div class="relative overflow-hidden bg-white rounded-t-xl h-80 w-full mb-4">
                                <img src="${mainImage}" alt="${prod.name}" class="h-full w-full object-cover group-hover:scale-105 transition duration-700 ease-in-out">
                            </div>
                            <div>
                                <h3 class="text-xl font-serif mb-1">${prod.name}</h3>
                                <div class="mb-4">
                                    <p class="text-xs uppercase tracking-widest text-gray-400 mb-2">Tono: <span class="text-brand-dark font-medium selected-tone-name">${prod.tone}</span></p>
                                    <div class="flex space-x-2">
                                        ${colorsHtml}
                                    </div>
                                </div>
                            </div>
                        </div>
                    `;
                    grid.innerHTML += cardHtml;
                });

                detailView.classList.remove('hidden');
                window.scrollTo(0, document.getElementById('catalogo').offsetTop - 100);
                setTimeout(() => detailView.classList.remove('opacity-0'), 50);

            }, 500);
        }

        function closeKitDetail() {
            const kitsView = document.getElementById('vista-kits');
            const detailView = document.getElementById('vista-kit-detalle');

            detailView.classList.add('opacity-0');
            setTimeout(() => {
                detailView.classList.add('hidden');
                kitsView.classList.remove('hidden');
                setTimeout(() => kitsView.classList.remove('opacity-0'), 50);
            }, 500);
        }

        // Navbar scroll effect
        window.addEventListener('scroll', () => {
            const nav = document.querySelector('nav');
            if (window.scrollY > 50) {
                nav.classList.add('shadow-md');
                nav.classList.replace('h-20', 'h-16');
            } else {
                nav.classList.remove('shadow-md');
                nav.classList.replace('h-16', 'h-20');
            }
        });

        // INICIALIZAR RENDERIZADO
        document.addEventListener('DOMContentLoaded', () => {
            renderProducts();
        });

    </script>
</body>

</html>