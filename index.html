<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>12 Days of Beauty - Calendario de Adviento</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Poppins:wght@300;400;600&family=Dancing+Script:wght@700&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.7.77/Tone.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" rel="stylesheet">
    
    <!-- A√±adida la librer√≠a Three.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

    <style>
        :root {
            --bg-color-light: #fdf5f5; /* Crema/Blanco roto */
            --bg-color-medium: #fff0f0; /* Rosado muy claro */
            --wine-red: #8b0000; /* Rojo vino oscuro */
            --medium-wine-red: #a52a2a; /* Rojo vino un poco m√°s claro */
            --gold: #d4af37; /* Dorado cl√°sico */
            --light-gold: #f0c860; /* Dorado m√°s claro para brillos */
            --text-dark: #3a1c1c; /* Textos oscuros para contraste */
            --white: #ffffff;
            --border-color-light: #eee;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(170deg, var(--bg-color-light), var(--bg-color-medium), var(--bg-color-light));
            background-size: 200% 200%;
            animation: animated-bg 15s ease infinite;
            color: var(--text-dark);
            overflow-x: hidden;
        }
        
        @keyframes animated-bg {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .font-playfair { font-family: 'Playfair Display', serif; }
        .font-dancing { font-family: 'Dancing Script', cursive; }

        /* --- Global Sections --- */
        .full-section {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            position: relative;
            padding: 80px 1rem 1rem;
        }

        .particle {
            position: absolute;
            opacity: 0;
            animation: particle-fall linear infinite;
        }

        @keyframes particle-fall {
            0% { transform: translateY(-10vh) rotate(0deg); opacity: 0; }
            20%, 80% { opacity: 0.9; }
            100% { transform: translateY(110vh) rotate(360deg); opacity: 0; }
        }

        /* --- Header --- */
        header {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            z-index: 50;
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid var(--border-color-light);
            transition: transform 0.3s ease-out;
        }

        /* --- Landing Section (Tapa 3D) --- */
        #landing-section {
            position: relative;
            overflow: hidden;
        }
        #canvas-hero {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1; /* Detr√°s del texto */
        }
        #landing-section .hero-text {
            position: relative; /* Asegura que est√© sobre el canvas */
            z-index: 10;
            color: var(--text-dark); /* Color del tema */
            text-shadow: 0 0 10px var(--white); /* Sombra para legibilidad */
            /* Ajuste para subir el texto */
            margin-bottom: 25vh; /* Mueve el texto 25% de la altura del viewport hacia arriba */
        }
         /* Asegura que el scroll-down sea visible */
        .scroll-down {
            position: absolute; bottom: 30px; left: 50%; transform: translateX(-50%);
            color: var(--text-dark); z-index: 10;
        }
        .scroll-down span {
            display: block; width: 20px; height: 20px;
            border-bottom: 2px solid var(--text-dark); border-right: 2px solid var(--text-dark);
            transform: rotate(45deg); margin: -10px auto; animation: scroll-ani 2s infinite;
        }
        @keyframes scroll-ani {
            0% { transform: rotate(45deg) translate(-5px, -5px); opacity: 0; }
            50% { opacity: 1; }
            100% { transform: rotate(45deg) translate(5px, 5px); opacity: 0; }
        }

        /* --- Calendar Grid Section (Caja 3D de fondo) --- */
         #interactive-section {
            position: relative; /* Necesario para el hijo absoluto */
            overflow: hidden;
        }
        /* ESTILO ELIMINADO: #canvas-box ya no existe */
        
        /* Asegura que el contenido del calendario est√© sobre el canvas */
        #interactive-section > .z-10, 
        #interactive-section > .calendar-container {
            position: relative;
            z-index: 10;
        }
        
        .calendar-container { 
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 1.5rem;
        }
        .calendar-grid {
            display: grid; 
            gap: 1rem;
            width: clamp(320px, 90vw, 800px); 
            padding: 1.5rem;
            background: linear-gradient(145deg, var(--white), var(--bg-color-medium));
            border-radius: 2rem; box-shadow: 0 20px 40px rgba(139, 0, 0, 0.1);
            position: relative; border: 1px solid var(--white);
            
            /* Inspirado en la foto de la caja real */
            grid-template-columns: repeat(4, 1fr);
            grid-auto-rows: minmax(90px, 1fr);
            /* NUEVO LAYOUT - COINCIDE CON LA FOTO */
        }
        
        /* REVERTIDO: Animaci√≥n de Caj√≥n (Drawer) */
        .calendar-box {
            cursor: pointer;
            position: relative;
            perspective: 500px;
            min-height: 90px;
        }
        
        /* Asignaci√≥n de √°reas de la cuadr√≠cula */
        [data-day="1"] { grid-area: 1 / 1 / 3 / 2; } /* Fila 1 a 3, Col 1 a 2 */
        [data-day="2"] { grid-area: 1 / 2 / 2 / 3; } /* Fila 1 a 2, Col 2 a 3 */
        [data-day="3"] { grid-area: 1 / 3 / 2 / 4; } /* Fila 1 a 2, Col 3 a 4 */
        [data-day="5"] { grid-area: 1 / 4 / 2 / 5; } /* Fila 1 a 2, Col 4 a 5 */
        
        [data-day="4"] { grid-area: 2 / 2 / 3 / 3; } /* Fila 2 a 3, Col 2 a 3 */
        [data-day="6"] { grid-area: 2 / 3 / 3 / 4; } /* Fila 2 a 3, Col 3 a 4 */
        [data-day="7"] { grid-area: 2 / 4 / 3 / 5; } /* Fila 2 a 3, Col 4 a 5 */
        
        [data-day="8"] { grid-area: 3 / 1 / 4 / 3; } /* Fila 3 a 4, Col 1 a 3 (Caja blanca) */
        [data-day="9"] { grid-area: 3 / 3 / 4 / 4; } /* Fila 3 a 4, Col 3 a 4 */
        [data-day="10"] { grid-area: 3 / 4 / 4 / 5; } /* Fila 3 a 4, Col 4 a 5 */

        [data-day="11"] { grid-area: 4 / 1 / 5 / 2; } /* Fila 4 a 5, Col 1 a 2 */
        [data-day="12"] { grid-area: 4 / 2 / 5 / 5; } /* Fila 4 a 5, Col 2 a 5 */
        
        [data-day="13"] { grid-area: 5 / 1 / 6 / 3; } /* Fila 5 a 6, Col 1 a 3 */
        [data-day="14"] { grid-area: 5 / 3 / 6 / 5; } /* Fila 5 a 6, Col 3 a 5 */


        .drawer {
            width: 100%;
            height: 100%;
            position: relative;
            transform-style: preserve-3d;
            transition: transform 0.6s cubic-bezier(0.23, 1, 0.32, 1);
            transform: translateZ(0);
        }
        
        .calendar-box:not(.locked):not(.opened):hover .drawer {
            transform: translateZ(10px) scale(1.02);
        }

        /* 1. Animaci√≥n de deslizamiento */
        .calendar-box.opened .drawer {
            transform: translateZ(30px); /* Deslizar hacia adelante */
        }
        
        .drawer-face, .drawer-base {
            position: absolute;
            inset: 0;
            width: 100%; height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border-radius: 0.5rem;
        }

        .drawer-face {
            background: var(--white);
            border: 1px solid var(--border-color-light);
            box-shadow: 0 4px 15px rgba(139, 0, 0, 0.05);
            color: var(--wine-red);
            padding: 0.5rem;
            transform: translateZ(5px); /* Cara frontal */
            transition: opacity 0.3s ease-out, box-shadow 0.3s ease-out, border-color 0.3s ease-out;
            opacity: 1;
            z-index: 2; /* Encima de la base */
        }
        
        /* Animaci√≥n de Hover con Brillo */
        .calendar-box:not(.locked):not(.opened):hover .drawer-face {
            box-shadow: 0 0 15px rgba(212, 175, 55, 0.7); /* --gold con alpha */
            border-color: var(--light-gold);
        }

        .drawer-base {
            background: var(--bg-color-light);
            box-shadow: inset 0 0 15px rgba(0,0,0,0.1);
            color: var(--wine-red);
            transform: translateZ(-15px); /* Detr√°s de la cara frontal */
            font-size: 0.9rem;
            text-align: center;
            font-weight: 600;
            overflow: hidden; /* Para contener la imagen */
        }
        
        /* 2. Animaci√≥n de desvanecimiento de la cara */
        .calendar-box.opened .drawer-face {
            opacity: 0;
        }

        .box-day-number {
            font-family: 'Playfair Display', serif;
            font-size: clamp(1.5rem, 4vw, 2.5rem);
            font-weight: 700;
            line-height: 1;
        }
        .box-decorations {
            font-size: 0.8rem;
            color: var(--medium-wine-red);
            opacity: 0.7;
            display: flex;
            gap: 0.5rem;
            margin-bottom: 0.25rem;
        }
        /* Cajas m√°s grandes */
        [data-day="1"] .box-day-number,
        [data-day="7"] .box-day-number,
        [data-day="8"] .box-day-number,
        [data-day="12"] .box-day-number,
        [data-day="13"] .box-day-number,
        [data-day="14"] .box-day-number {
            font-size: clamp(2rem, 5vw, 3.5rem);
        }
        
        .calendar-box .product-preview {
            opacity: 1; /* El producto siempre est√° visible en la base */
            font-size: 0.9rem; text-align: center; font-weight: 600;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 0.5rem;
            width: 100%;
            height: 100%;
        }
        
        /* NUEVO: Estilos para la imagen del producto en la caja */
        .product-preview img {
            width: 80%;
            height: 80%;
            max-width: 100px;
            max-height: 100px;
            object-fit: contain; /* Para que la imagen se vea bien */
            margin-bottom: 0.25rem;
        }
        .product-preview span {
            font-size: 0.8rem;
        }
        /* END DRAWER STYLES */


        .calendar-box.next-to-open { 
            animation: pulsate 2s infinite; 
        }
        
        @keyframes pulsate {
            0%, 100% { transform: scale(1); filter: drop-shadow(0 0 3px var(--gold)); }
            50% { transform: scale(1.03); filter: drop-shadow(0 0 10px var(--gold)); }
        }
        
        #progress-counter {
            font-family: 'Dancing Script', cursive;
            font-size: 1.5rem;
            color: var(--wine-red);
            background-color: var(--white);
            padding: 0.5rem 1.5rem;
            border-radius: 999px;
            box-shadow: 0 4px 15px rgba(139, 0, 0, 0.1);
        }


        /* Modal Redesign */
        #modal-overlay { background: rgba(58, 28, 28, 0.3); backdrop-filter: blur(8px); } /* Oscuro para contraste */
        #product-modal {
            background: linear-gradient(160deg, var(--white) 50%, var(--bg-color-light) 100%);
            border-radius: 1.5rem; box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
            border: 1px solid white; padding: 1.5rem;
        }
        #close-modal {
            position: absolute; top: 1rem; right: 1rem; width: 2.5rem; height: 2.5rem;
            background-color: var(--bg-color-medium); color: var(--wine-red); border-radius: 50%;
            font-size: 1.5rem; line-height: 1; z-index: 10;
        }
        /* NUEVO: Contenedor de imagen en Modal */
        .product-image-container {
            width: 100%;
            height: 12rem; /* 192px */
            background-color: var(--bg-color-medium);
            border-radius: 0.5rem;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }
        .product-image-container img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }


        /* Bonus Boxes */
        .calendar-box.locked .drawer { filter: grayscale(80%); cursor: not-allowed; }
        .calendar-box.locked .drawer-face { background: #f5f5f5; color: #aaa; }
        .calendar-box.locked::after {
            content: '\f023';
            font-family: 'Font Awesome 6 Free'; font-weight: 900;
            position: absolute; font-size: 1.5rem; color: rgba(0,0,0,0.2);
            top: 50%; left: 50%; transform: translate(-50%, -50%);
            z-index: 10;
        }

        .calendar-box.unlocked { 
            animation: pulsate-gold 2s infinite; 
        }
        .calendar-box.unlocked .drawer-face { 
            background: linear-gradient(145deg, var(--white), #fff9e0); 
            color: var(--gold); 
            border-color: var(--gold);
        }
        

        @keyframes pulsate-gold {
             0%, 100% { transform: scale(1); filter: drop-shadow(0 0 3px var(--gold)); }
             50% { transform: scale(1.05); filter: drop-shadow(0 0 10px var(--gold)); }
        }

        .daily-message {
            background-color: var(--bg-color-light); border: 1px dashed var(--border-color-light);
            margin-top: 1rem; padding: 0.75rem; border-radius: 0.75rem;
            font-style: italic; color: var(--medium-wine-red); text-align: center;
        }
        
        /* Estilos de Pesta√±as (Tabs) */
        .tab-buttons {
            display: flex;
            border-bottom: 2px solid var(--border-color-light);
            margin-top: 1rem;
        }
        .tab-btn {
            padding: 0.5rem 1rem;
            border: none;
            background: none;
            cursor: pointer;
            color: #aaa;
            font-weight: 600;
            position: relative;
            bottom: -2px;
            font-size: 0.875rem;
        }
        .tab-btn.active {
            color: var(--wine-red);
            border-bottom: 2px solid var(--wine-red);
        }
        .tab-content {
            padding-top: 1rem;
            min-height: 80px; /* Asegura altura m√≠nima */
        }
        .tab-panel {
            display: none;
            font-size: 0.875rem;
            line-height: 1.6;
            color: #666;
        }
        .tab-panel.active {
            display: block;
        }
        
        .modal-actions {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-top: 1.5rem;
        }
        .modal-action-btn {
            background: none;
            border: none;
            cursor: pointer;
            font-size: 1.5rem;
            color: #d1d5db; /* Gris para inactivo */
            transition: all 0.2s ease;
        }
        .modal-action-btn:hover {
            color: var(--gold); /* Dorado al pasar el rat√≥n */
            transform: scale(1.1);
        }
        .modal-action-btn.active {
            color: var(--gold); /* Dorado para activo */
        }

        /* Confetti Animation */
        .confetti {
            position: absolute;
            width: 10px; height: 10px;
            opacity: 0;
            animation: confetti-fall 5s ease-out forwards;
        }
        @keyframes confetti-fall {
            0% { transform: translateY(-10vh) rotate(0deg); opacity: 1; }
            100% { transform: translateY(110vh) rotate(720deg); opacity: 0; }
        }
        
        /* Sparkle Animation */
        .sparkle {
            position: absolute;
            width: 8px; height: 8px;
            background: var(--light-gold); /* Sparkles en dorado claro */
            border-radius: 50%;
            opacity: 0;
            pointer-events: none;
            animation: sparkle-anim 0.6s ease-out;
        }
        @keyframes sparkle-anim {
            0% { opacity: 1; transform: scale(0); }
            50% { opacity: 1; transform: scale(1.5); }
            100% { opacity: 0; transform: scale(0); }
        }


        /* Scroll Animations */
        #product-grid .product-card {
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.5s ease-out, transform 0.5s ease-out;
        }
        #product-grid .product-card.visible {
            opacity: 1;
            transform: translateY(0);
        }
    </style>
</head>
<body>

    <header>
        <nav class="container mx-auto px-6 py-4 flex justify-between items-center">
            <div class="flex items-center space-x-2">
                <div class="w-10 h-10 bg-medium-wine-red text-white rounded-full flex items-center justify-center"><i class="fa-solid fa-gift"></i></div>
                <div class="font-playfair font-bold text-lg text-wine-red">12 Days of Beauty</div>
            </div>
            <div class="hidden md:flex items-center space-x-8 text-sm font-semibold">
                <a href="#landing-section" class="hover:text-wine-red transition">Home</a>
                <a href="#interactive-section" class="hover:text-wine-red transition">Calendario</a>
                <a href="#content-section" class="hover:text-wine-red transition">Comprar</a>
            </div>
             <div class="flex items-center space-x-4">
                <button class="w-8 h-8 rounded-full hover:bg-bg-color-medium transition text-wine-red"><i class="fa-solid fa-user"></i></button>
            </div>
        </nav>
    </header>
    
    <div id="particle-container"></div>
    <div id="confetti-container" class="fixed inset-0 pointer-events-none z-[100] overflow-hidden"></div>

    
    <section id="landing-section" class="full-section hero">
      <canvas id="canvas-hero"></canvas>
      <div class="hero-text z-10 text-center relative -mt-[35vh]">
        <!-- Texto a√±adido y ajustado con margin-bottom --><h1 class="font-playfair text-4xl md:text-6xl font-bold text-wine-red">Calendario de Adviento 2025</h1>
        <p class="text-medium-wine-red mt-4 text-lg">‚ú® Cada d√≠a una nueva forma de brillar ‚ú®</p>
      </div>
       <a href="#interactive-section" class="scroll-down">
            <span></span>
        </a>
    </section>

    
    <!-- SECCI√ìN INTERACTIVA CON ANIMACI√ìN 3D DE FONDO --><section id="interactive-section" class="full-section text-center">
        <!-- Canvas para la animaci√≥n de la caja (ELIMINADO) --><!-- Contenido del calendario (con z-index para estar al frente) (ELIMINADO) --><div class="calendar-container mt-8 z-10">
                  <div class="z-10">
            <h1 class="font-playfair text-4xl md:text-5xl font-bold text-wine-red">Calendario Interactivo</h1>
            <p class="text-medium-wine-red mt-4 max-w-xl">¬°Haz clic en cada cajita para descubrir la sorpresa del d√≠a! Te esperan 12 regalos de belleza y 2 bonus especiales.</p>
        </div>  
          
          <div class="calendar-grid" id="calendar-grid">
            </div>
            <div id="progress-counter">¬°Comienza tu viaje m√°gico!</div>
        </div>
    </section>

    

<div id="modal-overlay" class="fixed inset-0 z-[99] opacity-0 invisible transition-opacity">
        <div id="product-modal" class="w-11/12 max-w-sm absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 opacity-0 invisible transition-all duration-300"></div>
    </div>
    
    

<main id="content-section" class="py-20 px-6 container mx-auto">
       <section class="text-center max-w-4xl mx-auto mb-20">
            <h2 class="font-playfair text-4xl md:text-5xl font-bold mb-4 text-wine-red">Una Colecci√≥n M√°gica</h2>
            <p class="text-lg text-medium-wine-red">Cada producto en nuestro calendario de adviento est√° cuidadosamente seleccionado para traer alegr√≠a y belleza a tu temporada festiva.</p>
        </section>
        <section class="grid md:grid-cols-2 lg:grid-cols-3 gap-8 mb-20" id="product-grid"></section>
    </main>

    <script>
        // ========================================================================
        // üîπ L√ìGICA DE THREE.JS (hero.js y box.js)
        // ========================================================================
        
        // --- L√≥gica de hero.js ---
        function initHero() {
          const canvas = document.getElementById('canvas-hero');
          if (!canvas) return;
          const renderer = new THREE.WebGLRenderer({ canvas, antialias: true, alpha: true }); // alpha: true para fondo transparente
          renderer.setSize(window.innerWidth, window.innerHeight);

          const scene = new THREE.Scene();
          const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
          camera.position.z = 4;

          // A√±adida la textura
            const loader = new THREE.TextureLoader();
            // Aseg√∫rate de que la ruta 'textures/Glossy Landing Page.png' es accesible
            const texture = loader.load('textures/Glossy Landing Page.png');
            texture.colorSpace = THREE.SRGBColorSpace;
            texture.wrapS = texture.wrapT = THREE.ClampToEdgeWrapping;
            texture.anisotropy = renderer.capabilities.getMaxAnisotropy();

          // Materiales con la textura
          const materials = [
            new THREE.MeshBasicMaterial({ color: '#ffb3c6' }), // derecha
            new THREE.MeshBasicMaterial({ color: '#ffb3c6' }), // izquierda
            new THREE.MeshBasicMaterial({ color: '#ffb3c6' }), // arriba
            new THREE.MeshBasicMaterial({ color: '#ffb3c6' }), // abajo
            new THREE.MeshBasicMaterial({ map: texture }), // frente
            new THREE.MeshBasicMaterial({ color: '#ffb3c6' })  // atr√°s
          ];

          const geometry = new THREE.BoxGeometry(5, 3.5, 0.1);
          geometry.translate(0, -1.5, 0);
          const lid = new THREE.Mesh(geometry, materials);
          lid.position.set(0, 0.5, 0);
          scene.add(lid);

          // üîπ A√±adimos la referencia al contenedor del calendario
          const calendarContainer = document.querySelector('#interactive-section .calendar-container');

          let scrollProgress = 0;

          function updateScrollProgress() {
            // Actualizado el selector
            const section = document.querySelector('#interactive-section');
            if (!section) return;
            const rect = section.getBoundingClientRect();
            const viewportHeight = window.innerHeight;
            const visibleRatio = 1 - Math.min(Math.max(rect.top / viewportHeight, 0), 1);
            scrollProgress = visibleRatio;
          }
          window.addEventListener('scroll', updateScrollProgress);

          function animate() {
            requestAnimationFrame(animate);

            // üîπ Animar apertura de tapa
            const angle = -scrollProgress * (Math.PI / 5);
            lid.rotation.x = angle;

            // üîπ Movimiento vertical
            lid.position.y = 0.5 + scrollProgress * 1.5;
            
            // üîπ Animaci√≥n del calendario (en lugar de la caja 3D)
            if (calendarContainer) {
                const startY = -80; // Empezar 80vh ARRIBA
                const endY = 0; // Terminar en su posici√≥n original
                const currentY = startY - (startY - endY) * scrollProgress;
                calendarContainer.style.transform = `translateY(${currentY}vh)`;
                calendarContainer.style.opacity = scrollProgress; // Fade in
            }


            renderer.render(scene, camera);
          }

          animate();

          window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
          });
        // ‚ùóÔ∏è CORRECCI√ìN: El '});' extra de la actualizaci√≥n anterior ha sido eliminado.
        // Esta es ahora la llave de cierre correcta para initHero().
        }

        // --- L√≥gica de box.js (ELIMINADA) ---
    
        // ========================================================================
        // üîπ L√ìGICA DEL CALENDARIO DE ADVIENTO
        // ========================================================================
        document.addEventListener('DOMContentLoaded', () => {
            const calendarGrid = document.getElementById('calendar-grid');
            const previewGrid = document.querySelector('#landing-section .calendar-preview-grid');
            const modalOverlay = document.getElementById('modal-overlay');
            const productModal = document.getElementById('product-modal');
            const particleContainer = document.getElementById('particle-container');
            const productGrid = document.getElementById('product-grid');
            const progressCounter = document.getElementById('progress-counter');
            const confettiContainer = document.getElementById('confetti-container');
            
            // üîπ Ocultar el calendario inicialmente para la animaci√≥n
            if (document.querySelector('#interactive-section .calendar-container')) {
                document.querySelector('#interactive-section .calendar-container').style.opacity = 0;
            }

            let openedCount = 0;

            // CAMBIO: 'imageUrl' ahora usa rutas relativas.
            // ¬°Aseg√∫rate de crear una carpeta "imagenes" y guardar tus im√°genes all√≠!
            const products = [
                { day: 1, name: "Iluminador Dupe Dior", imageUrl: "./iluminadorDior.png", message: "Que tus labios siempre digan palabras amables.", details: { desc: "Un labial cremoso en un tono rosa aterciopelado.", ingredients: "Vitamina E, Manteca de Karit√©, Pigmentos Naturales.", usage: "Aplicar directamente sobre los labios para un color intenso." } },
                { day: 2, name: "Labial Mate Dupe Maybelline",  imageUrl: "./imagenes/producto2.jpg", message: "Brilla con luz propia, hoy y siempre.", details: { desc: "Polvo nacarado para un brillo celestial.", ingredients: "Mica, Polvo de Perla, Escualeno.", usage: "Usar una brocha para aplicar en p√≥mulos, nariz y arco de cupido." } },
                { day: 3, name: "Tinta de labios", imageUrl: "./imagenes/producto3.jpg", message: "La verdadera belleza comienza con una piel cuidada.", details: { desc: "S√©rum hidratante con √°cido hialur√≥nico.", ingredients: "√Åcido Hialur√≥nico, Glicerina, Agua de Rosas.", usage: "Aplicar 2-3 gotas sobre la piel limpia antes de la crema hidratante." } },
                { day: 4, name: "LipGloss Tiffany Dupe Maybelline", imageUrl: "./imagenes/producto4.jpg", message: "Un toque de color para alegrar el d√≠a.", details: { desc: "Un rubor suave para un look fresco y natural.", ingredients: "Talco, Mica, Estearato de Magnesio.", usage: "Sonre√≠r y aplicar en las manzanas de las mejillas." } },
                { day: 5, name: "Rubor dupe de Rhode", imageUrl: "./imagenes/producto5.jpg", message: "T√≥mate un momento para refrescarte y respirar.", details: { desc: "Bruma refrescante para calmar la piel.", ingredients: "Agua de Rosas, Aloe Vera, Glicerina.", usage: "Rociar sobre el rostro a 20cm de distancia para hidratar." } },
                { day: 6, name:"Mini paleta de sombras", imageUrl: "./imagenes/producto6.jpg", message: "Tu mirada tiene el poder de iluminar el mundo.", details: { desc: "Sombra dorada para un look radiante.", ingredients: "Mica, Pigmentos Sint√©ticos, Dimeticona.", usage: "Aplicar sobre el p√°rpado con una brocha o con el dedo." } },
                { day: 7, name: "Polvo translucido", imageUrl: "./imagenes/producto7.jpg", message: "Una buena base lo es todo.", details: { desc: "Prebase suavizante para un maquillaje perfecto.", ingredients: "Silicona, Pol√≠meros Matificantes.", usage: "Aplicar una capa fina sobre la piel antes de la base." } },
                { day: 8, name: "Fijador", imageUrl: "./fijador.png", message: "¬°Oops! Esta caja est√° vac√≠a (¬°como en la foto!).", details: { desc: "Esta caja representa el espacio vac√≠o en el calendario real.", ingredients: "N/A", usage: "N/A" } },
                { day: 9, name: "Fat Oil Labial", imageUrl: "./imagenes/producto9.jpg", message: "La sonrisa es el mejor maquillaje.", details: { desc: "Rubor rosa suave para un aspecto natural.", ingredients: "Talco, Mica, Extracto de Melocot√≥n.", usage: "Aplicar en las mejillas y difuminar hacia las sienes." } },
                { day: 10, name: "Rimel dupe Maybelline", imageUrl: "./imagenes/producto10.jpg", message: "Mientras sue√±as, tu piel se renueva.", details: { desc: "Aceite facial para restaurar la piel.", ingredients: "Aceite de Jojoba, Aceite de Arg√°n, Lavanda.", usage: "Masajear 3-4 gotas sobre el rostro como √∫ltimo paso de la rutina nocturna." } },
                { day: 11, name: "Paleta de sombras Terra", imageUrl: "./imagenes/producto11.jpg", message: "Unas cejas bien definidas enmarcan tu belleza.", details: { desc: "Define y da forma a tus cejas.", ingredients: "Cera de Abeja, Aceite de Ricino, Pigmentos.", usage: "Rellenar las cejas con trazos cortos y ligeros." } },
                { day: 12, name: "Perfume", imageUrl: "./imagenes/producto12.jpg", message: "Celebra cada peque√±o momento con un toque de brillo.", details: { desc: "Brillo resplandeciente para un acabado festivo.", ingredients: "Poliisobuteno, Aceite Mineral, Part√≠culas de Brillo.", usage: "Aplicar solo o sobre tu labial favorito." } },
                { day: 13, isBonus: true, name: "Macarilla", imageUrl: "./imagenes/bonus1.jpg", message: "¬°Bonus! La creatividad est√° en tus manos.", details: { desc: "Las herramientas perfectas para un acabado profesional.", ingredients: "Cerdas sint√©ticas de alta calidad, mangos de madera.", usage: "Usar para aplicar base, sombras, rubor y m√°s." } },
                { day: 14, isBonus: true, name: "Kit Kevin and Coco Iluminador, rubor y brocha", imageUrl: "./kit.png", message: "¬°Gran Premio! El √∫nico l√≠mite es tu imaginaci√≥n.", details: { desc: "Una colecci√≥n de sombras para deslumbrar.", ingredients: "18 tonos (mates y brillantes), alta pigmentaci√≥n.", usage: "Crear looks ilimitados, desde naturales hasta dram√°ticos." } }
            ];

            let synth;
            function playSound(note, duration = '8n') {
                if (typeof Tone === 'undefined') return;
                try {
                    if (Tone.context.state !== 'running') {
                        Tone.start();
                    }
                    if (!synth) {
                        synth = new Tone.Synth({ oscillator: { type: 'triangle' }, envelope: { attack: 0.02, decay: 0.1, sustain: 0.3, release: 1 } }).toDestination();
                    }
                    synth.triggerAttackRelease(note, duration);
                } catch (e) {
                    console.error("Tone.js error: ", e);
                }
            }
            
            function createSparkles(element) {
                for(let i=0; i<5; i++) {
                    const sparkle = document.createElement('div');
                    sparkle.className = 'sparkle';
                    const x = (Math.random() - 0.5) * 150;
                    const y = (Math.random() - 0.5) * 150;
                    sparkle.style.setProperty('--x', `${x}px`);
                    sparkle.style.setProperty('--y', `${y}px`);
                    sparkle.style.left = `calc(50% + ${x}px)`;
                    sparkle.style.top = `calc(50% + ${y}px)`;
                    element.appendChild(sparkle);
                    setTimeout(() => sparkle.remove(), 600);
                }
            }

            function highlightNextBox() {
                document.querySelectorAll('.calendar-box').forEach(b => b.classList.remove('next-to-open'));
                const nextBox = document.querySelector('.calendar-box:not(.opened):not(.locked)');
                if (nextBox) nextBox.classList.add('next-to-open');
            }
            
            // Funci√≥n para obtener decoraciones inspiradas en la foto
            function getDecorations(day) {
                switch(day) {
                    case 1: return '<i class="fa-regular fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-regular fa-star"></i>';
                    case 2: return '<i class="fa-solid fa-tree"></i>';
                    case 3: return '<i class="fa-solid fa-bell"></i> <i class="fa-solid fa-holly-berry"></i> <i class="fa-solid fa-bell"></i>';
                    case 4: return '<span class="font-dancing text-lg">his his</span>';
                    case 5: return '<i class="fa-solid fa-holly-berry"></i>';
                    case 6: return '<i class="fa-solid fa-tree"></i> <i class="fa-solid fa-music"></i> <i class="fa-solid fa-tree"></i>';
                    case 7: return '<span class="font-dancing text-lg">Merry Christmas</span>';
                    case 8: return ''; // Caja 8 en blanco
                    case 9: return '<i class="fa-solid fa-gift"></i>';
                    case 10: return '<i class="fa-solid fa-star-of-life"></i> <i class="fa-solid fa-asterisk"></i> <i class="fa-solid fa-star-of-life"></i>';
                    case 11: return '<i class="fa-solid fa-gift"></i>';
                    case 12: return '<i class="fa-solid fa-bell"></i> <i class="fa-solid fa-bell"></i> <i class="fa-solid fa-bell"></i>';
                    case 13: return '<i class="fa-solid fa-wand-magic-sparkles"></i>';
                    case 14: return '<i class="fa-solid fa-wand-magic-sparkles"></i>';
                    default: return '<i class="fa-solid fa-star"></i>';
                }
            }

            products.forEach((product) => {
                const calendarBox = document.createElement('div');
                calendarBox.className = 'calendar-box';
                calendarBox.dataset.day = product.day;
                if (product.isBonus) calendarBox.classList.add('locked');

                // CAMBIO: ESTRUCTURA HTML usa <img> en lugar de <i>
                calendarBox.innerHTML = `
                    <div class="drawer">
                        <div class="drawer-face">
                            <span class="box-decorations">${getDecorations(product.day)}</span>
                            <span class="box-day-number">${product.day}</span>
                        </div>
                        <div class="drawer-base">
                            <div class="product-preview">
                                <img src="${product.imageUrl}" alt="${product.name}" class="w-16 h-16 object-contain rounded-md mb-1" onerror="this.src='httpshttps://placehold.co/100x100/fff0f0/8b0000?text=?'; this.onerror=null;">
                                <span class="font-semibold">${product.name}</span>
                            </div>
                        </div>
                    </div>`;

                calendarBox.addEventListener('click', () => handleBoxClick(calendarBox, product));
                calendarGrid.appendChild(calendarBox);
                
                if (previewGrid && !product.isBonus) {
                    const previewBox = document.createElement('div');
                    previewBox.className = 'calendar-preview-box';
                    previewBox.textContent = product.day;
                    previewGrid.appendChild(previewBox);
                }

                const card = document.createElement('div');
                card.className = 'bg-white p-6 rounded-2xl shadow-lg product-card';
                // CAMBIO: ESTRUCTURA HTML usa <img> en lugar de <i>
                card.innerHTML = `
                    <div class="w-full h-48 bg-bg-color-medium rounded-lg mb-4 overflow-hidden">
                         <img src="${product.imageUrl}" alt="${product.name}" class="w-full h-full object-cover" onerror="this.src='httpshttps://placehold.co/400x300/fff0f0/8b0000?text=Error'; this.onerror=null;">
                    </div>
                    <h4 class="font-playfair text-xl font-bold text-wine-red">${product.name}</h4>
                    <p class="text-medium-wine-red mt-2 text-sm">${product.details.desc}</p>`;
                productGrid.appendChild(card);
            });
            
            highlightNextBox();

            function handleBoxClick(boxElement, product) {
                if (boxElement.classList.contains('locked')) {
                    playSound('C4', '16n');
                    return;
                }
                
                if (!boxElement.classList.contains('opened')) {
                    createSparkles(boxElement);
                    // Mostrar el modal DESPU√âS de que la animaci√≥n comience
                    setTimeout(() => {
                        showModal(product);
                    }, 500); // 500ms de retraso para el modal
                    
                    boxElement.classList.add('opened');
                    if (!product.isBonus) openedCount++;
                    
                    const totalDiscovered = products.filter(p => document.querySelector(`[data-day="${p.day}"]`).classList.contains('opened')).length
                    const totalProducts = products.length;
                    progressCounter.textContent = `${totalDiscovered} / ${totalProducts} Descubiertos`;
                    
                    playSound('E5');

                    // Desbloquea si se abrieron las 12 cajas (ignorando la caja 8 vac√≠a)
                    if (openedCount === products.filter(p => !p.isBonus && p.day !== 8).length) {
                        unlockBonusGifts();
                        triggerRewardAnimation();
                    }
                    highlightNextBox();
                } else {
                     // Si ya est√° abierto, solo mostrar el modal
                     showModal(product);
                }
            }

            function unlockBonusGifts() {
                document.querySelectorAll('.calendar-box.locked').forEach(box => {
                    box.classList.remove('locked');
                    box.classList.add('unlocked');
                });
                playSound('C6', '4n');
            }
            
            function triggerRewardAnimation() {
                for (let i = 0; i < 50; i++) {
                    const confetti = document.createElement('div');
                    confetti.className = 'confetti';
                    confetti.style.left = `${Math.random() * 100}vw`;
                    confetti.style.animationDelay = `${Math.random() * 2}s`;
                    const color = Math.random() > 0.5 ? getComputedStyle(document.documentElement).getPropertyValue('--wine-red') : getComputedStyle(document.documentElement).getPropertyValue('--gold');
                    confetti.style.backgroundColor = color;
                    confettiContainer.appendChild(confetti);
                    setTimeout(() => confetti.remove(), 5000);
                }
            }

            function showModal(product) {
                // CAMBIO: HTML del Modal con <img>
                productModal.innerHTML = `
                    <button id="close-modal">&times;</button>
                    <div class="product-image-container">
                         <img src="${product.imageUrl}" alt="${product.name}" class="w-full h-full object-cover" onerror="this.src='httpshttps://placehold.co/400x300/fff0f0/8b0000?text=Error'; this.onerror=null;">
                    </div>
                    <h3 class="font-playfair text-center text-2xl font-bold text-wine-red">${product.name}</h3>
                    
                    <div class="tab-buttons">
                        <button class="tab-btn active" data-tab="desc">Descripci√≥n</button>
                        <button class="tab-btn" data-tab="ingredients">Ingredientes</button>
                        <button class="tab-btn" data-tab="usage">Modo de Uso</button>
                    </div>
                    <div class="tab-content">
                        <div class="tab-panel active" id="tab-desc">${product.details.desc}</div>
                        <div class="tab-panel" id="tab-ingredients">${product.details.ingredients}</div>
                        <div class="tab-panel" id="tab-usage">${product.details.usage}</div>
                    </div>

                    <div class="daily-message"><p>"${product.message}"</p></div>
                    <div class="modal-actions">
                        <button class="modal-action-btn" id="wishlist-btn" aria-label="A√±adir a favoritos"><i class="fa-regular fa-heart"></i></button>
                        <button class="modal-action-btn" id="share-btn" aria-label="Compartir"><i class="fa-solid fa-share-alt"></i></button>
                    </div>`;
                modalOverlay.classList.remove('invisible', 'opacity-0');
                productModal.classList.remove('invisible', 'opacity-0');
                document.getElementById('close-modal').addEventListener('click', hideModal);
                
                // L√≥gica para Pesta√±as
                const tabButtons = productModal.querySelectorAll('.tab-btn');
                const tabPanels = productModal.querySelectorAll('.tab-panel');
                
                tabButtons.forEach(btn => {
                    btn.addEventListener('click', () => {
                        // Quitar activo de todos
                        tabButtons.forEach(b => b.classList.remove('active'));
                        tabPanels.forEach(p => p.classList.remove('active'));
                        
                        // Poner activo en el clickeado
                        btn.classList.add('active');
                        const tabId = btn.dataset.tab;
                        productModal.querySelector(`#tab-${tabId}`).classList.add('active');
                    });
                });

                document.getElementById('wishlist-btn').addEventListener('click', (e) => {
                    e.currentTarget.classList.toggle('active');
                    e.currentTarget.querySelector('i').classList.toggle('fa-regular');
                    e.currentTarget.querySelector('i').classList.toggle('fa-solid');
                });

                document.getElementById('share-btn').addEventListener('click', (e) => {
                    e.currentTarget.classList.add('active');
                    setTimeout(() => e.currentTarget.classList.remove('active'), 1000);
                });

                playSound('G5');
            }

            function hideModal() {
                modalOverlay.classList.add('invisible', 'opacity-0');
                productModal.classList.add('invisible', 'opacity-0');
            }
            
            modalOverlay.addEventListener('click', (e) => { if (e.target === modalOverlay) hideModal(); });

            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('visible');
                    }
                });
            }, { threshold: 0.1 });

            document.querySelectorAll('#product-grid .product-card').forEach(card => observer.observe(card));

            const particleIcons = ['fa-star', 'fa-snowflake'];
            for (let i = 0; i < 40; i++) {
                const particle = document.createElement('i');
                const icon = particleIcons[Math.floor(Math.random() * particleIcons.length)];
                const color = icon === 'fa-star' ? 'var(--gold)' : '#d4af37'; /* Nieve en dorado para la nueva paleta */
                particle.className = `particle fa-solid ${icon}`;
                particle.style.color = color;
                particle.style.left = `${Math.random() * 100}vw`;
                particle.style.top = `${Math.random() * 200}vh`;
                particle.style.animationDuration = `${Math.random() * 8 + 7}s`;
                particle.style.animationDelay = `${Math.random() * 7}s`;
                particle.style.fontSize = `${Math.random() * 8 + 8}px`;
                particleContainer.appendChild(particle);
            }
            
            // ========================================================================
            // üîπ INICIALIZAR ANIMACIONES 3D
            // ========================================================================
            initHero();
        });
    </script>
</body>
</html>